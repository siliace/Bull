set(UTILITY_INC ${BULL_INCLUDE}/Utility)
set(UTILITY_SRC ${BULL_SRC}/Utility)

#Headers
file(GLOB_RECURSE UTILITY_INCLUDE_FILES ${UTILITY_INC}/*.hpp)

#Source
file(GLOB UTILITY_SOURCE_FILES ${UTILITY_SRC}/*.*)

#File System
file(GLOB UTILITY_WINDOW_SOURCE_FILES ${UTILITY_SRC}/Window/*.*)
if(BULL_OS_WINDOWS)
    file(GLOB UTILITY_WINDOW_IMPL_SOURCE_FILES ${UTILITY_SRC}/Window/Win32/*)
else()
    file(GLOB UTILITY_WINDOW_IMPL_SOURCE_FILES ${UTILITY_SRC}/Window/X11/*)
endif()
list(APPEND UTILITY_WINDOW_SOURCE_FILES ${UTILITY_WINDOW_IMPL_SOURCE_FILES})

list(APPEND UTILITY_SOURCE_FILES ${UTILITY_WINDOW_SOURCE_FILES})

list(APPEND UTILITY_EXT_LIBS stb)
list(APPEND UTILITY_EXT_LIBS freetype)

if(BULL_OS_GNU_LINUX)
    list(APPEND UTILITY_EXT_LIBS X11)
    list(APPEND UTILITY_EXT_LIBS Xrandr)
endif()

add_library(bull-utility SHARED ${UTILITY_INCLUDE_FILES} ${UTILITY_SOURCE_FILES})

target_link_libraries(bull-utility bull-core)
target_link_libraries(bull-utility bull-hardware)
target_link_libraries(bull-utility ${UTILITY_EXT_LIBS})